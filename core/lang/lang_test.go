package lang

import (
	"os"
	"path/filepath"
	"runtime"
	"testing"
)

var (
	_, b, _, _ = runtime.Caller(0)
	basepath   = filepath.Dir(b)
	root       = filepath.Join(filepath.Dir(b), "../..")
	pythonFile = filepath.Join(root, "test", "python_module.txt")
)

func TestPythonModuleRequire(t *testing.T) {
	data, _ := os.ReadFile(pythonFile)
	c := Checker{}
	c.language = new(Python)
	langErr, module_name, err := c.DiscoverError(string(data))
	if err != nil {
		t.Error("Should not give error")
	}

	if langErr != MISSING_MODULE {
		t.Error("Should return module not found")
	}

	if module_name != "pyfiglet" {
		t.Error("Should return pyfiglet module:", module_name)
	}

}
