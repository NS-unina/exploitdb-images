import subprocess
import os
from core.utils import commandmanager

def get_language(file_path):
    filename = os.path.basename(file_path)
    if filename.split('.')[1] == 'txt':
        cmd = "file "+ file_path
        language = commandmanager.exec_result(cmd)
        language = language.split(": ")[1].split()[0].lower()
        if(language == "python"):
            language = "py"
        elif(language == "c++"):
            language = "cpp"
        elif(language == "ruby"):
            language = "rb"
        elif(language == "exported"):
            language = "sgml"
        elif(language == "unified"):
            language = "diff"
        elif(language == "perl5"):
            language = "perl"
    else:
        language = filename.split('.')[1]
    return language